# Big Book of RF Engineering Notes

## Table of Contents

1. [RF Engineering](#RF Engineering)
2. [Antenna Engineering](#Antenna Engineering)
3. [Phased Array Antennas](#Phased Array Antennas)

<div style="page-break-after: always;"></div>

## RF Engineering

### Table of Contents

1. [Noise](#Noise in RF Systems)
2. [Signal Distortion](#Signal Distortion in RF Systems)
3. [Oscillators](#Oscillators)
4. [Impedance Matching](#Impedance Matching)
5. [Modulation and Coding](#Modulation and Coding)
6. [Mixed Signal Systems](#Mixed Signal Systems)

<div style="page-break-after: always;"></div>

### Noise in RF Systems

Thermal noise floor is $kT_0B$, which is the noise power produced by a matched resistor at the IEEE reference temperature $T_0=290K$ over a bandwidth of $B$. If the bandwidth is 1Hz, then the thermal noise floor is $-174\mathrm{dBm}/\mathrm{Hz}$.

IEEE definition of noise figures (NF) or noise factor (F) are as follows:
$$
\begin{align}
\mathrm{F}&=\frac{\mathrm{SNR}_{in}}{\mathrm{SNR}_{out}}\\
\mathrm{NF}&=10\log_{10}(\mathrm{F})\label{eqn:NF-definition}
\end{align}
$$

where $SNR_{in}$ is the signal-to-noise ratio at the device input, when the input noise is thermal-limited. In other words, the input noise power is equal to the noise power produced by a matched resistor at a physical temperature of $T_0=290K$.

> ###### Example: Measurement of Amplifier Noise Figure Using Cold Source
>
> In this section, we discuss the noise figure measurement of an RF low-noise amplifier using the cold source method. We will use the TinySA spectrum analyzer and the NanaVNA vector network analyzer. The device under test is the Nooelec LaNA HF, which is an LNA covering the 50kHz to 150MHz band.
>
> With the cold source method, we first measure the gain of the amplifier using the VNA.
>
> ...
>
> Next, we measure the noise power generated by the amplifier. We first put a $$50\Omega$$ termination directly at the input port of the TinySA. We measure a noise floor of $\mathrm{-169.3dBm/Hz}$. Since the thermal noise floor is $10\log_{10}(1.38\times10^{-23}\times10^{3}\times290)=\mathrm{-173.9dBm/Hz}$, we conclude that the noise generated by  the internal circuitry of the TinySA increased the total noise power by approximately $\mathrm{4.6dBm/Hz}$. This means the noise figure of TinySA is about 4.6dB. Alternatively, we can say it has an effective noise temperature of approximately $290\left(10^{4.6/10}-1\right)=546.4\mathrm{K}$, referred to the inputs.
>
> Having characterize the noise properties of the TinySA, we can now measure the DUT cascaded with its internal receiver. We will then remove the added noise of the TinySA from the overall measurements, to obtain the noise figure of the DUT itself.

#### Noise Cascade

When multiple noisy stages are cascaded, the total effective noise temperature referred to the input of the first stage is given by:
$$
T_{sys}=T_1+\frac{T_2}{G_1}+\frac{T_3}{G_1G_2}+\cdots\label{eqn:cascaded-noise-temperature}
$$
Where $T_n$ is the effective noise temperature of the $n^{th}$ stage, *referred to its own input*. Moving the reference location of an effective noise temperature value can be done by simply multiplying/dividing the gains of the appropriate stages. In [$\ref{eqn:cascaded-noise-temperature}$], it can be seen that the noise temperature of the very first stage dominates the total temperature, if there is large gain afterwards. Hence in a receiver it is desirable to put an LNA as close to the antenna as possible, to reduce the impact of noise in the later stages. 

We can also calculate the noise figure of the entire system. Each stage of the system will have its own specified noise figure. Remember that the noise figure [$\ref{eqn:NF-definition}$] is defined for when the input noise power is equal to exactly $kT_0B$. So we cannot simply cascade the noise figures of the individual components together, because the input to the latter stages are no longer a matched resistor. Instead, it is safer to calculate the effective noise temperature of each stage using its specified noise figure, cascade the temperatures together using [$\ref{eqn:cascaded-noise-temperature}$], then convert the total temperature back to a total noise figure:
$$
F_{sys}=F_1+\frac{F_2-1}{G_1}+\frac{F_3-1}{G_1G_2}+\cdots\label{eqn:cascaded-NF}
$$

<div style="page-break-after: always;"></div>

### Signal Distortion in RF Systems

Sources of nonlinear signal distortion:

- Gain compression
- Intermodulation

<div style="page-break-after: always;"></div>

### Oscillators

Model for a noisy oscillator
$$
v(t)=A(t)\cos\left[\omega_ct+\phi_n(t)\right]\label{eqn:noisy-oscillator}
$$
where $A(t)$ captures amplitude noise, and $\phi_n(t)$ captures the phase noise.

We can interpret phase noise as phase modulation of the desired ideal oscillator output signal $\cos(\omega_ct)$, except that the modulation signal is pure noise. For simplicity, let us first consider the case when the phase modulation is a single-tone sinusoid. This is a helpful example, since we can interpret a noisy signal as the summation of infinitely many sinusoids all with random amplitudes and phases. 

#### Effect of Phase Noise on EVM



#### White Phase Noise

Consider the case where $\phi_n(t)$ is Gaussian distributed with zero mean and standard deviation $\sigma_{rms}$. This means the probability density function of $\phi_n(t)$ is given by
$$
f(\phi)=\frac{1}{\sqrt{2\pi\sigma_{rms}}}e^{-\frac{\phi^2}{2\sigma^2_{rms}}}
$$

#### Oscillator Pulling

Oscillator pulling happens when a strong (undesired) signal couples to a resonator, causing its resonance frequency to change. It is also called **injection locking** or **injection pulling**.


<div style="page-break-after: always;"></div>

### Impedance Matching

#### LC Components on Smith Chart

This section describes how shunt and series LC components behave on the smith chart, which can be used to intuitively derive potential matching network topologies.

##### Series Capacitor

As the frequency increases from DC to infinity, the input impedance swings from open circuit (OC) to the terminating resistance. 

<figure>
  <div align="center">
    <img src="D:\Proton Drive\My files\Notes\rf-engineering-notes\assets\image-20250527224407714.png" alt="Trulli" style="zoom:35%"><figcaption>Frequency response of series capacitor on the Smith chart.</figcaption>
</figure>

Note that the series capacitor is a high pass circuit. This means its effect on the impedance is stronger at low frequencies, and weaker at high frequencies. This can be seen from the impedance plot on the Smith chart. The high-frequency points are far away from the right side of the Smitch chart, where any tiny movement represents a huge change in impedance, as can be seen by the axis ticks.

##### Series Inductor

<figure>
  <div align="center">
    <img src="D:\Proton Drive\My files\Notes\rf-engineering-notes\assets\image-20250527225605418.png" alt="Trulli" style="zoom:35%"><figcaption>Frequency response of series inductor on the Smith chart.</figcaption>
</figure>

At DC, the series inductor behaves as a perfectly conducting wire; hence the input impedance is just that of the terminating resistance. As the frequency increases to infinity, the input impedance swings towards OC.

The series inductor is a low pass circuit, meaning it has stronger effect to the input impedance at high frequencies. In the plot above, we see that the low frequency points are far away from the right side of the Smith chart, while the high frequency points are clustered on the right side, where any small movements represents huge deviations in the impedance.

##### Shunt Capacitor

<figure>
  <div align="center">
    <img src="D:\Proton Drive\My files\Notes\rf-engineering-notes\assets\image-20250527232300916.png" alt="Trulli" style="zoom:35%"><figcaption>Frequency response of shunt capacitor on the Smith chart.</figcaption>
</figure>

The shunt capacitor is a low pass circuit, meaning it will have larger impact on the admittance of the admittance of the circuit at high frequencies. On the Smith chart, the high frequency points are clustered to the left side, where any small movements correspond huge changes in admittance.

##### Shunt Inductor

<figure>
  <div align="center">
    <img src="D:\Proton Drive\My files\Notes\rf-engineering-notes\assets\image-20250527232958354.png" alt="Trulli" style="zoom:35%"><figcaption>Frequency response of shunt inductor on the Smith chart.</figcaption>
</figure>

##### Series RLC Resonator



##### Shunt RLC Resonator



#### Broadband Matching Techniques

##### Reducing Q-factor Using LC

The idea here is to twist the $S_{11}$ trace on the Smith chart by adding components that affect the two ends, such that they become closer to the real axis. This lowers the Q factor of the network and allows us to match it over a broader bandwidth.

<div style="page-break-after: always;"></div>

### Modulation and Coding

Different modulation formats and code rates will require different SINAD (signal-to-noise and distortion).

<div style="page-break-after: always;"></div>

### Mixed Signal Systems

<div style="page-break-after: always;"></div>

## Antenna Engineering

### Table of Contents

1. [Wire Antenna](#Wire Antenna)
2. [Microstrip Patch Antenna](# Microstrip Patch Antenna)
3. [Parabolic Antenna](#Parabolic Antenna)

<div style="page-break-after: always;"></div>

### Wire Antenna

<div style="page-break-after: always;"></div>

### Microstrip Patch Antenna

<div style="page-break-after: always;"></div>

### Parabolic Antenna

<div style="page-break-after: always;"></div>


## Phased Array Antennas

<div style="page-break-after: always;"></div>

### Table of Contents
1. [Discrete Fourier Transform](#Discrete Fourier Transform)
1. [Beamforming](#Beamforming)
2. [Digital Beamforming](#Digital Beamforming)
3. [Spatial Signal Processing](#Spatial Signal Processing)
4. [Nonlinearity in Phased Arrays](#Nonlinearity in Phased Arrays)

<div style="page-break-after: always;"></div>

### Discrete Fourier Transform
The array factor of a phased array antenna can be efficiently computed using the Fast Fourier Transform (FFT), which is a method to compute the Discrete Fourier Transform (DFT). This is not only useful in evaluating the performance of the array, but also valuable in gaining intuition on the physics behind certain phenomena in phased array systems, such as the generation of grating lobes, and nonlinear spatial mixing.


### Beamforming

Define the steering vector (also known as the array manifold vector) $\bar{v}_{\vec{k}}$ as 
$$
\bar{v}_{\vec{k}}[n]=e^{j\vec{k}\cdot\vec{r}_n}
$$
Where $\vec{r}_n$ is the position of the $n^{th}$ antenna. We can interpret the steering vector as the voltages measured at the positions of the antennas with an unit-amplitude plane wave incident *from* the direction of $\vec{k}$, or, in the direction of $-\vec{k}$.

In a transmitting array, the total transmitted signal to the direction of $\vec{k}$ is equal to $\bar{w}^\dagger\bar{v}_{\vec{k}}$, where $\bar{w}$ is a vector corresponding to the weights of the antennas.

When $\bar{v}_{\vec{k}}$ is parallel with $\bar{w}$, the response (transmitted or received power) is maximized. When the two vectors are orthogonal, the array response is minimized.

#### Conventional Beamformer

The conventional beamformer for a beam towards the direction of $\vec{k}$ has weights equal to
$$
\bar{w}=\bar{v}_{\vec{k}}
$$

#### Minimum Variance Distortionless Response (MVDR) Beamformer

#### Linearly Constrained Minimum Covariance (LCMV) Beamformer

<div style="page-break-after: always;"></div>

### Digital Beamforming

#### Spatial Multiplexing

Spatial multiplexing refers to the transmission of multiple independent streams of data to different spatial positions or angles, using the same antenna aperture. This is easily achieved through digital beamforming.

Theoretically speaking, the maximum number of independently steerable beams is equal to the number of antenna elements. However in practice, we would not want too many beams, as it increases the peak-to-average ratio if the total emitted signal, which lowers the PA efficiency/increases chance of saturation. 

#### Delay Steering

<div style="page-break-after: always;"></div>

### Nonlinearity in Phased Arrays

<div style="page-break-after: always;"></div>

